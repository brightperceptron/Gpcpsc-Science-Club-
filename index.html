<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gpcpsc Science Club</title>
<meta name="description" content="The Gpcpsc Science Club, powered by NeuraSoft LTD, is a vibrant community in Gazipur, Bangladesh, dedicated to sparking curiosity and advancing scientific discovery. We offer workshops, experiments, and events to make science accessible and exciting.

Join students, educators, and enthusiasts to explore the wonders of science and contribute to our mission.">
  <meta name="keywords" content="gpcpsc,science club,gpcpsc science club,gazipur,cantonment,public">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* Base font for the body, using 'Inter' from Google Fonts */
    body {
      font-family: 'Inter', sans-serif;
    }
    /* Hero section background with a linear gradient and relative positioning for particle animations */
    .hero-bg {
      background: linear-gradient(to right, #1e3a8a, #3b82f6);
      position: relative;
      overflow: hidden; /* Ensures particles don't spill out */
    }
    /* Styling for the animated particles in the hero section */
    .particle {
      position: absolute;
      background: rgba(255, 255, 255, 0.7); /* Semi-transparent white */
      border-radius: 50%; /* Makes them circular */
      animation: orbit 12s linear infinite; /* Applies the orbit animation */
    }
    /* Specific sizes and animation durations for individual particles to vary movement */
    .particle:nth-child(1) { width: 8px; height: 8px; top: 15%; left: 10%; animation-duration: 10s; }
    .particle:nth-child(2) { width: 6px; height: 6px; top: 50%; left: 85%; animation-duration: 14s; }
    .particle:nth-child(3) { width: 10px; height: 10px; top: 70%; left: 30%; animation-duration: 12s; }
    /* Keyframe animation for particle movement, creating an orbital effect */
    @keyframes orbit {
      0% { transform: translate(0, 0); }
      25% { transform: translate(15px, -15px); }
      50% { transform: translate(0, -30px); }
      75% { transform: translate(-15px, -15px); }
      100% { transform: translate(0, 0); }
    }
    /* Modal overlay styling: Hidden by default, covers the entire screen */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6); /* Semi-transparent black overlay */
      z-index: 1000; /* Ensures it's on top of other content */
      align-items: center;
      justify-content: center;
    }
    /* Modal content box styling: White background, rounded corners, centered */
    .modal-content {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      max-width: 90%;
      width: 500px;
      text-align: center;
      animation: fadeIn 0.5s ease-in-out; /* Fade-in animation for appearance */
      border: 3px solid #3b82f6; /* Blue border */
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2); /* Soft shadow for depth */
    }
    /* Keyframe animation for modal fade-in effect */
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    /* Class to display the modal when active */
    .modal.show {
      display: flex;
    }
    /* Styling for form input fields, including border and transition effects */
    .input-field {
      border: 2px solid #3b82f6;
      border-radius: 8px;
      transition: border-color 0.3s, box-shadow 0.3s; /* Smooth transition on focus */
    }
    /* Focus state for input fields, adding a blue glow */
    .input-field:focus {
      border-color: #1e3a8a;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
    }
    /* Styling for error messages in forms, hidden by default */
    .error {
      color: #dc2626; /* Red color for errors */
      font-size: 0.875rem; /* Small font size */
      display: none; /* Hidden by default */
      margin-top: 0.25rem;
    }
    /* Styling for game selection tabs */
    .game-tab {
      cursor: pointer;
      padding: 0.5rem 1rem;
      background: #e5e7eb; /* Light gray background */
      border-radius: 8px 8px 0 0; /* Rounded top corners */
      transition: background 0.3s; /* Smooth background change */
    }
    /* Active state for game tabs, with blue background and white text */
    .game-tab.active {
      background: #3b82f6;
      color: white;
    }
    /* Base styling for p5.js canvas elements */
    canvas {
      display: block; /* Removes extra space below inline elements */
      margin: 0 auto; /* Centers the canvas horizontally */
      max-width: 100%; /* Ensures it doesn't overflow its container */
    }
    /* Responsive adjustments for canvas and game controls on small screens */
    @media (max-width: 640px) {
      canvas {
        width: 100%;
        height: auto; /* Maintains aspect ratio */
      }
      .game-controls {
        max-width: 90%; /* Adjusts max-width for better fit on small screens */
      }
    }
  </style>
</head>
<body class="bg-gray-100">
  <div id="splash-modal" class="modal">
    <div class="modal-content">
      <h2 id="modal-title" class="text-2xl font-bold text-blue-900 mb-4"></h2>
      <p id="modal-text" class="text-gray-700 mb-6"></p>
      <div class="flex justify-center space-x-4">
        <a href="#membership" class="bg-orange-500 text-white px-6 py-2 rounded-full hover:bg-orange-600">Join Now</a>
        <button id="close-modal" class="bg-gray-300 text-gray-700 px-6 py-2 rounded-full hover:bg-gray-400">Close</button>
      </div>
    </div>
  </div>

  <header class="bg-white shadow sticky top-0 z-50">
    <nav class="container mx-auto px-4 sm:px-6 py-4 flex flex-col sm:flex-row justify-between items-center">
      <div class="text-2xl font-bold text-blue-900 mb-2 sm:mb-0">Gpcpsc Science Club</div>
      <div class="flex flex-wrap justify-center gap-2 sm:gap-4">
        <a href="#home" class="text-blue-600 hover:text-blue-800 text-sm sm:text-base">Home</a>
        <a href="#play-learn" class="text-blue-600 hover:text-blue-800 text-sm sm:text-base">Play & Learn</a>
        <a href="#membership" class="text-blue-600 hover:text-blue-800 text-sm sm:text-base">Join Us</a>
        <a href="#about" class="text-blue-600 hover:text-blue-800 text-sm sm:text-base">About</a>
        <a href="#events" class="text-blue-600 hover:text-blue-800 text-sm sm:text-base">Events</a>
        <a href="#gallery" class="text-blue-600 hover:text-blue-800 text-sm sm:text-base">Gallery</a>
        <a href="#resources" class="text-blue-600 hover:text-blue-800 text-sm sm:text-base">Resources</a>
        <a href="#contact" class="text-blue-600 hover:text-blue-800 text-sm sm:text-base">Contact</a>
      </div>
    </nav>
  </header>

  <section id="home" class="hero-bg text-white py-12 sm:py-20 text-center relative">
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="container mx-auto px-4 sm:px-6 relative z-10">
      <h1 class="text-3xl sm:text-5xl font-bold mb-4">Welcome to Gpcpsc Science Club</h1>
      <p class="text-lg sm:text-xl mb-6">Ignite Your Curiosity, Discover the Wonders of Science</p>
      <a href="#membership" class="bg-orange-500 text-white px-6 py-3 rounded-full hover:bg-orange-600 text-sm sm:text-base">Join Our Community</a>
    </div>
  </section>

  <section id="play-learn" class="py-12 sm:py-16 bg-white">
    <div class="container mx-auto px-4 sm:px-6">
      <h2 class="text-2xl sm:text-3xl font-bold text-blue-900 mb-6 text-center">Play & Learn</h2>
      <p class="text-base sm:text-lg text-gray-700 mb-6 text-center">
        Dive into science with interactive games that make learning fun!
      </p>
      <div class="flex justify-center gap-2 mb-4">
        <button class="game-tab active" onclick="switchGame('projectile')">Projectile Motion</button>
        <button class="game-tab" onclick="switchGame('periodic')">Periodic Table Quiz</button>
        <button class="game-tab" onclick="switchGame('orbit')">Orbit Simulator</button>
      </div>
      <div id="game-content" class="bg-gray-100 p-4 rounded-lg max-w-4xl mx-auto">
        <div id="projectile-game" class="game-section">
          <h3 class="text-xl font-semibold text-blue-900 mb-2 text-center">Projectile Motion</h3>
          <p class="text-gray-700 mb-4 text-center">Adjust angle and velocity to hit the target!</p>
          <div class="game-controls max-w-md mx-auto mb-4">
            <label for="angle" class="block text-gray-700 font-semibold mb-2">Angle (degrees):</label>
            <input type="range" id="angle" min="0" max="90" value="45" class="w-full">
            <p id="angle-value" class="text-gray-700 text-center">45°</p>
            <label for="velocity" class="block text-gray-700 font-semibold mb-2">Velocity (m/s):</label>
            <input type="range" id="velocity" min="10" max="100" value="50" class="w-full">
            <p id="velocity-value" class="text-gray-700 text-center">50 m/s</p>
            <label for="gravity" class="block text-gray-700 font-semibold mb-2 mt-4">Gravity (m/s²):</label>
            <input type="range" id="gravity" min="1" max="20" step="0.1" value="9.81" class="w-full">
            <p id="gravity-value" class="text-gray-700 text-center">9.81 m/s²</p>
            <label for="drag" class="block text-gray-700 font-semibold mb-2 mt-4">Air Resistance:</label>
            <input type="range" id="drag" min="0" max="0.1" step="0.001" value="0.01" class="w-full">
            <p id="drag-value" class="text-gray-700 text-center">0.01</p>
            <button id="launch" class="bg-blue-600 text-white px-6 py-2 rounded-full hover:bg-blue-700 mt-4 w-full">Launch</button>
            <p id="score-display" class="text-gray-700 font-semibold mt-4 text-center">Score: <span id="score-value">0</span></p>
            <button id="projectile-fact-btn" class="bg-yellow-600 text-white px-6 py-2 rounded-full hover:bg-yellow-700 mt-4 w-full">Science Fact ✨</button>
            <div id="projectile-fact-explanation" class="text-gray-800 mt-4 p-3 bg-white rounded-lg shadow-inner hidden">
                <p class="text-center text-gray-500" id="projectile-fact-loading-text">Loading science fact...</p>
            </div>
          </div>
          <div id="projectile-canvas"></div>
        </div>
        <div id="periodic-game" class="game-section hidden">
          <h3 class="text-xl font-semibold text-blue-900 mb-2 text-center">Periodic Table Quiz</h3>
          <p class="text-gray-700 mb-4 text-center">Match the element to its symbol!</p>
          <div class="game-controls max-w-md mx-auto mb-4">
            <p id="quiz-question" class="text-gray-700 font-semibold mb-2 text-center"></p>
            <div id="quiz-options" class="grid grid-cols-2 gap-2"></div>
            <p id="quiz-feedback" class="text-center mt-2"></p>
            <button id="explain-element-btn" class="bg-purple-600 text-white px-6 py-2 rounded-full hover:bg-purple-700 mt-4 w-full">Explain Element ✨</button>
            <button id="next-quiz-btn" class="bg-green-600 text-white px-6 py-2 rounded-full hover:bg-green-700 mt-2 w-full">Next Question</button>
            <div id="element-explanation" class="text-gray-800 mt-4 p-3 bg-white rounded-lg shadow-inner hidden">
              <p class="text-center text-gray-500" id="explanation-loading-text">Loading explanation...</p>
            </div>
          </div>
          <div id="periodic-canvas"></div>
        </div>
        <div id="orbit-game" class="game-section hidden">
          <h3 class="text-xl font-semibold text-blue-900 mb-2 text-center">Orbit Simulator</h3>
          <p class="text-gray-700 mb-4 text-center">Adjust mass to control the planet's orbit!</p>
          <div class="game-controls max-w-md mx-auto mb-4">
            <label for="star-mass" class="block text-gray-700 font-semibold mb-2">Star Mass (relative):</label>
            <input type="range" id="star-mass" min="500" max="2000" value="1000" class="w-full">
            <p id="star-mass-value" class="text-gray-700 text-center">1000</p>
            <button id="add-planet-btn" class="bg-green-600 text-white px-6 py-2 rounded-full hover:bg-green-700 mt-4 w-full">Add New Planet</button>
            <button id="reset-orbit" class="bg-blue-600 text-white px-6 py-2 rounded-full hover:bg-blue-700 mt-2 w-full">Reset Orbit</button>
            <button id="orbit-fact-btn" class="bg-teal-600 text-white px-6 py-2 rounded-full hover:bg-teal-700 mt-4 w-full">Orbital Fact ✨</button>
            <div id="orbit-fact-explanation" class="text-gray-800 mt-4 p-3 bg-white rounded-lg shadow-inner hidden">
                <p class="text-center text-gray-500" id="orbit-fact-loading-text">Loading orbital fact...</p>
            </div>
          </div>
          <div id="orbit-canvas"></div>
        </div>
      </div>
    </div>
  </section>

  <section id="membership" class="py-12 sm:py-16 bg-gray-100">
    <div class="container mx-auto px-4 sm:px-6">
      <h2 class="text-2xl sm:text-3xl font-bold text-blue-900 mb-6 text-center">Join Our Science Community</h2>
      <form name="membership" method="POST" data-netlify="true" id="membership-form" class="max-w-lg mx-auto bg-white p-6 sm:p-8 rounded-lg shadow-md">
        <input type="hidden" name="form-name" value="membership">
        <div class="mb-4">
          <label for="name" class="block text-gray-700 font-semibold mb-2">Full Name</label>
          <input type="text" id="name" name="name" class="input-field w-full px-4 py-2" required>
          <p id="name-error" class="error">Please enter your full name.</p>
        </div>
        <div class="mb-4">
          <label for="email" class="block text-gray-700 font-semibold mb-2">Email Address</label>
          <input type="email" id="email" name="email" class="input-field w-full px-4 py-2" required>
          <p id="email-error" class="error">Please enter a valid email address.</p>
        </div>
        <div class="mb-4">
          <label for="phone" class="block text-gray-700 font-semibold mb-2">Phone Number</label>
          <input type="tel" id="phone" name="phone" pattern="[0-9]{10,15}" class="input-field w-full px-4 py-2">
          <p id="phone-error" class="error">Please enter a valid phone number (10-15 digits).</p>
        </div>
        <div class="mb-4">
          <label for="student-id" class="block text-gray-700 font-semibold mb-2">Student ID</label>
          <input type="text" id="student-id" name="studentId" class="input-field w-full px-4 py-2">
          <p id="student-id-error" class="error">Please enter a valid Student ID.</p>
        </div>

        <div class="mb-4">
          <label for="dob" class="block text-gray-700 font-semibold mb-2">Date of Birth</label>
          <input type="date" id="dob" name="dob" class="input-field w-full px-4 py-2" required>
          <p id="dob-error" class="error">You must be at least 13 years old to join.</p>
        </div>
        <div class="mb-4">
          <label for="address" class="block text-gray-700 font-semibold mb-2">Address</label>
          <textarea id="address" name="address" class="input-field w-full px-4 py-2" rows="3"></textarea>
        </div>
        <div class="mb-4">
          <label for="institution" class="block text-gray-700 font-semibold mb-2">Institution</label>
          <input type="text" id="institution" name="institution" class="input-field w-full px-4 py-2" placeholder="e.g., Gazipur Cantonment Public School and College">
        </div>
        <div class="mb-4">
          <label for="department" class="block text-gray-700 font-semibold mb-2">Department/Section</label>
          <input type="text" id="department" name="department" class="input-field w-full px-4 py-2" placeholder="e.g., Science/Commerce/Arts, Proton/Electron/Neutron">
        </div>
        <div class="mb-4">
          <label for="membership-type" class="block text-gray-700 font-semibold mb-2">Membership Type</label>
          <select id="membership-type" name="membership-type" class="input-field w-full px-4 py-2" required>
            <option value="student">Student</option>
            <option value="professional">Professional</option>
            <option value="enthusiast">Enthusiast</option>
          </select>
        </div>
        <div class="mb-4">
          <label for="interests" class="block text-gray-700 font-semibold mb-2">Scientific Interests</label>
          <textarea id="interests" name="interests" class="input-field w-full px-4 py-2" rows="4" placeholder="e.g., Astrophysics, Robotics, Biochemistry"></textarea>
        </div>
        <div class="mb-4">
          <label for="experience" class="block text-gray-700 font-semibold mb-2">Experience Level</label>
          <select id="experience" name="experience" class="input-field w-full px-4 py-2">
            <option value="beginner">Beginner</option>
            <option value="intermediate">Intermediate</option>
            <option value="advanced">Advanced</option>
          </select>
        </div>
        <div class="mb-4">
          <label class="flex items-center">
            <input type="checkbox" id="consent" name="consent" class="mr-2" required>
            <span class="text-gray-700 text-sm sm:text-base">I agree to the club's terms and conditions.</span>
          </label>
          <p id="consent-error" class="error">You must agree to the terms and conditions.</p>
        </div>
        <button type="submit" class="w-full bg-blue-600 text-white px-6 py-3 rounded-full hover:bg-blue-700 text-sm sm:text-base">Submit Application</button>
      </form>
    </div>
  </section>

  <section id="about" class="py-12 sm:py-16 bg-white">
    <div class="container mx-auto px-4 sm:px-6">
      <h2 class="text-2xl sm:text-3xl font-bold text-blue-900 mb-6 text-center">About Us</h2>
      <p class="text-base sm:text-lg text-gray-700 mb-4 text-center">
        The Gpcpsc Science Club, powered by NeuraSoft LTD, is a vibrant community in Gazipur, Bangladesh, dedicated to sparking curiosity and advancing scientific discovery. We offer workshops, experiments, and events to make science accessible and exciting.
      </p>
      <p class="text-base sm:text-lg text-gray-700 text-center">
        Join students, educators, and enthusiasts to explore the wonders of science and contribute to our mission.
      </p>
    </div>
  </section>

  <section id="events" class="py-12 sm:py-16 bg-gray-100">
    <div class="container mx-auto px-4 sm:px-6">
      <h2 class="text-2xl sm:text-3xl font-bold text-blue-900 mb-6 text-center">Upcoming Events</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
        <div class="bg-white p-4 sm:p-6 rounded-lg shadow-md">
          <h3 class="text-lg sm:text-xl font-semibold text-blue-900 mb-2">Science Fest</h3>
          <p class="text-gray-700 text-sm sm:text-base"> Date: 28 July , 2025.</p>
        </div>
        <div class="bg-white p-4 sm:p-6 rounded-lg shadow-md">
          <h3 class="text-lg sm:text-xl font-semibold text-blue-900 mb-2">Ai and ML workshop</h3>
          <p class="text-gray-700 text-sm sm:text-base">Date: 25 September , 2025.</p>
        </div>
        <div class="bg-white p-4 sm:p-6 rounded-lg shadow-md">
          <h3 class="text-lg sm:text-xl font-semibold text-blue-900 mb-2">Workshop on Robotics and Astronoy</h3>
          <p class="text-gray-700 text-sm sm:text-base">Discover the cosmos with telescopes.  Date: 25 september , 2025.</p>
        </div>
      </div>
      <div class="text-center mt-6">
        <a href="#membership" class="bg-blue-600 text-white px-6 py-3 rounded-full hover:bg-blue-700 text-sm sm:text-base">Join to Participate</a>
      </div>
    </div>
  </section>

  <section id="gallery" class="py-12 sm:py-16 bg-white">
    <div class="container mx-auto px-4 sm:px-6">
      <h2 class="text-2xl sm:text-3xl font-bold text-blue-900 mb-6 text-center">Gallery</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
        <div class="bg-gray-200 h-40 sm:h-48 rounded-lg"><img src="i_1.jpg" alt="Science Club Activity 1" class="w-full h-full object-cover rounded-lg"></div>
        <div class="bg-gray-200 h-40 sm:h-48 rounded-lg"><img src="i_2.jpg" alt="Science Club Activity 2" class="w-full h-full object-cover rounded-lg"></div>
        <div class="bg-gray-200 h-40 sm:h-48 rounded-lg"><img src="i_3.jpg" alt="Science Club Activity 3" class="w-full h-full object-cover rounded-lg"></div>
      </div>
        </div>
      <p class="text-center text-gray-700 mt-4 text-sm sm:text-base">Science Fest 2025</p>
    </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
        <div class="bg-gray-200 h-40 sm:h-48 rounded-lg"><img src="https://scontent.fdac68-2.fna.fbcdn.net/v/t39.30808-6/524743585_122126129306893318_5378691079270401070_n.jpg?_nc_cat=105&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeHXGk_mogEuuja2xhox0l2gxwTK1PcMEjbHBMrU9wwSNksCdbqifMvzmrs_Wwsr1NC4gBzc-wQVJOd-zLHCiooU&_nc_ohc=kv4TKPmt250Q7kNvwFPxAWd&_nc_oc=AdmTEq8uWHbzO9EG7lLXttU6iKg76N1stL-lTzc7u4CH4CARBoppmI0Tu3Fdf3bzqMw&_nc_zt=23&_nc_ht=scontent.fdac68-2.fna&_nc_gid=G4dk2jgT2yccSqSS6Eyf7Q&oh=00_AfSAX4AShoIdmhHdK1GP49nu5rAmSkTFPCmZVkF-oZWuIg&oe=6891844A" alt="Science Club Activity 1" class="w-full h-full object-cover rounded-lg"></div>
        <div class="bg-gray-200 h-40 sm:h-48 rounded-lg"><img src="https://scontent.fdac68-2.fna.fbcdn.net/v/t39.30808-6/524889748_122126129348893318_950692499903913968_n.jpg?_nc_cat=103&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeGFfkm-v2dggs83-FAOKrkTdHBKLKH_xux0cEosof_G7JnMCWbYuryrFl0YCfjPVOfXmCbqylwE4g9GIek0izCn&_nc_ohc=002XPt-NDHoQ7kNvwH_I_xw&_nc_oc=AdmbbnOZSTvrXLss5OhN5_b6Qn50Mv-bqlivvtZi6iZyaUqOvS7JLTOBNQy1ILpcBi4&_nc_zt=23&_nc_ht=scontent.fdac68-2.fna&_nc_gid=HU4dT2oW2KhfAPFBE1xM4g&oh=00_AfR1P8swDkjMckTuvBQR1jmuALttCaEVzZpnwtS8qc_HaQ&oe=68919F7C" alt="Science Club Activity 2" class="w-full h-full object-cover rounded-lg"></div>
        <div class="bg-gray-200 h-40 sm:h-48 rounded-lg"><img src="https://scontent.fdac68-1.fna.fbcdn.net/v/t39.30808-6/525367475_122126129444893318_2454329231469315344_n.jpg?_nc_cat=109&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeGdS7cp1qJuycNwxJPOwyHsB8QRJ0r6pSEHxBEnSvqlIaIXBEUQ9qHmAFfrY82P2wdGCULzbUZ1vzbtLt2GAsoJ&_nc_ohc=ysU3HWgpbs8Q7kNvwHEgQZn&_nc_oc=Adlcv3YtounmmKrILTrO7S1EqYq5IFpAXsqnqTxCk--dekEa_uocqiT14gbgXsLdI4o&_nc_zt=23&_nc_ht=scontent.fdac68-1.fna&_nc_gid=Tn7hTav2bpzqMVFmHgH5IA&oh=00_AfTBHVKTiX76jJEXrqmXUfRImIT46aRsYTW6KW1A6osL_w&oe=6891AE6F" alt="Science Club Activity 3" class="w-full h-full object-cover rounded-lg"></div>
      </div>
       <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
        <div class="bg-gray-200 h-40 sm:h-48 rounded-lg"><img src="https://scontent.fdac68-1.fna.fbcdn.net/v/t39.30808-6/525584634_122126103584893318_5723299055290079608_n.jpg?_nc_cat=109&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeEfobmvoboE2TjvTL5vL40U24OCEnGgWjvbg4IScaBaO7Ij2kqw9ymGcpWsoyldyxHoxdZYnJvRbfqqRVUa17pJ&_nc_ohc=MSKJc-M9DpoQ7kNvwEEAqln&_nc_oc=AdkgNkOkCr3NR94fUMUrsAKOMtzAJtNMg09PWqjbhgSAGC7quKVfn_PO2MAv7zrWiD8&_nc_zt=23&_nc_ht=scontent.fdac68-1.fna&_nc_gid=iy9hlt5PQCQQWHiASqjysg&oh=00_AfTIAANAQrY_bEvp6hoWAjl_IelBqt1DZU6gqt5f3SdVsA&oe=6891A569" alt="Science Club Activity 1" class="w-full h-full object-cover rounded-lg"></div>
        <div class="bg-gray-200 h-40 sm:h-48 rounded-lg"><img src="https://scontent.fdac68-2.fna.fbcdn.net/v/t39.30808-6/524755384_122126103860893318_6178096163771856377_n.jpg?_nc_cat=100&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeGgHjfbQS9zeFMYJZA2OJw9fVcft2Vi7QN9Vx-3ZWLtA8PQIM_DYjweJ2k-BdBWOX0zsMmrBnB4oF92_mnzCcTF&_nc_ohc=S3leH5p_e1oQ7kNvwE9o-7U&_nc_oc=Adl5_SxnMErWji4ExQ7TTcPkwaZaatc_-f0memPbRFPXLdgpl2ht1Xol3upac1KV1xc&_nc_zt=23&_nc_ht=scontent.fdac68-2.fna&_nc_gid=oPljt-Qp3fu9MoX1VHz-Yw&oh=00_AfT_49zCOX0GQDiQ2TVMxsTWLJM-4NI2A52DAMMI8h-Lbw&oe=68918454" alt="Science Club Activity 2" class="w-full h-full object-cover rounded-lg"></div>
        <div class="bg-gray-200 h-40 sm:h-48 rounded-lg"><img src="https://scontent.fdac68-2.fna.fbcdn.net/v/t39.30808-6/525907045_122126128514893318_2972406871844663554_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeHQkiIKEPapa_zNUDwZ5wZh-JBEaAhOAjv4kERoCE4CO3Lp7ImHagsmZJ0dAhj_RFysRmjMJc6wpS-iin07ii7i&_nc_ohc=CJAt5nKW0CcQ7kNvwEFH4Ne&_nc_oc=AdlueDgCAxtd1sF8us8cEP7pkk14Nn_anPnLWA_sBwNEnsTpqXybCb8TPzMTPtquO40&_nc_zt=23&_nc_ht=scontent.fdac68-2.fna&_nc_gid=todJWs7BFIauvHQd8H_GIQ&oh=00_AfSx5lZgnpxTS6rFTHEIolHXji7L1Vr7yKj-ID3JvrSm3w&oe=68918A5F" alt="Science Club Activity 3" class="w-full h-full object-cover rounded-lg"></div>
      </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
        <div class="bg-gray-200 h-40 sm:h-48 rounded-lg"><img src="https://scontent.fdac68-2.fna.fbcdn.net/v/t39.30808-6/525136457_122126128898893318_905212973821361627_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeF8QVCAoU8E2m8wSTHjysiauGyy5BuyYFS4bLLkG7JgVKd67RjWoPU1i-no8wqmczbFFmn8d6C3Iiqcwh1jZy7C&_nc_ohc=jYcgKMEPascQ7kNvwFBendS&_nc_oc=AdmWC0F-ZC5MeWSKBtEzCg-SL7n1eiZUm__On03419jMdlhOh_YHwtqJ0C-p6Nyx5Jc&_nc_zt=23&_nc_ht=scontent.fdac68-2.fna&_nc_gid=nhUXuszFRp5HGwxJozEvow&oh=00_AfTc-UW10CXDbPP_WOb_j2JuDx-wEH1cOANO729RQlSouw&oe=6891903D" alt="Science Club Activity 1" class="w-full h-full object-cover rounded-lg"></div>
        <div class="bg-gray-200 h-40 sm:h-48 rounded-lg"><img src="https://scontent.fdac68-1.fna.fbcdn.net/v/t39.30808-6/524777130_122126129036893318_5878051117968894168_n.jpg?_nc_cat=109&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeFT3Lu1sRhYLYdPnd9m82Hx8xsCOPa-93DzGwI49r73cHGi-6WUzZeg-ybnKU5BHIkMzmSEvwP3wj8v_tsMWz69&_nc_ohc=xNBBznMpyYEQ7kNvwETRJUV&_nc_oc=AdmoanE99IXVJDriwKPdxHXwZ9J1iChhsHpOO5bT0Wb6pYVilCUB00hednmk3sNWXD8&_nc_zt=23&_nc_ht=scontent.fdac68-1.fna&_nc_gid=n9QPjppIttcLkc7UFgGw-A&oh=00_AfSkALtWX8ZNMOUKqfK9yu6XAFASVCdqAyL7MaW0YkDJWg&oe=6891AADB" alt="Science Club Activity 2" class="w-full h-full object-cover rounded-lg"></div>
        <div class="bg-gray-200 h-40 sm:h-48 rounded-lg"><img src="https://scontent.fdac68-2.fna.fbcdn.net/v/t39.30808-6/525953361_122126129258893318_7239426559991626828_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeESsdhapx3eAJoK9Qa5iw3SsWLYoRujcR2xYtihG6NxHfLrRZ9Qq2JAGs-LkG_OblguLk7VajfYKfwXJf8gKGnB&_nc_ohc=iQ_2eAtLq24Q7kNvwGtltIb&_nc_oc=AdldDhTKOv1yCsUM6-XGqOFJqjwtHGJpH79ChNuwBLYm7jIbAkSps-l6lvsyITcPrSo&_nc_zt=23&_nc_ht=scontent.fdac68-2.fna&_nc_gid=5yoZ_iGFNMnJwmHkcqjiFg&oh=00_AfTNPz3uXvWwhCbAQDjvSYZkI7EcQjmPCPsYubRpBlO9Kw&oe=689196A5" alt="Science Club Activity 3" class="w-full h-full object-cover rounded-lg"></div>
      </div>
      <p class="text-center text-gray-700 mt-4 text-sm sm:text-base">Check back for photos from our latest events!</p>
    </div>
  </section>

  <section id="resources" class="py-12 sm:py-16 bg-gray-100">
    <div class="container mx-auto px-4 sm:px-6">
      <h2 class="text-2xl sm:text-3xl font-bold text-blue-900 mb-6 text-center">Resources</h2>
      <p class="text-base sm:text-lg text-gray-700 mb-4 text-center">
        Fuel your curiosity with these science resources.
      </p>
      <ul class="list-disc list-inside text-gray-700 max-w-md mx-auto text-sm sm:text-base">
        <li><a href="https://www.nasa.gov" class="text-blue-600 hover:underline">NASA - Space Exploration</a></li>
        <li><a href="https://www.khanacademy.org/science" class="text-blue-600 hover:underline">Khan Academy - Science Courses</a></li>
        <li><a href="https://www.scientificamerican.com" class="text-blue-600 hover:underline">Scientific American</a></li>
      </ul>
    </div>
  </section>

  <section id="contact" class="py-12 sm:py-16 bg-white">
    <div class="container mx-auto px-4 sm:px-6">
      <h2 class="text-2xl sm:text-3xl font-bold text-blue-900 mb-6 text-center">Contact Us</h2>
      <p class="text-base sm:text-lg text-gray-700 mb-4 text-center">
        Reach out at <a href="mailto:science.club.gpcpsc@gmail.com" class="text-blue-600 hover:underline">science.club.gpcpsc@gmail.com</a>
      </p>
      <div class="w-full h-48 sm:h-64 bg-gray-200 rounded-lg overflow-hidden">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3643.7380226075397!2d90.41187477433597!3d24.040301777586972!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3755da2cf0ff92cf%3A0xf9e620d5cfdec8eb!2sGazipur%20Cantonment%20Public%20School%20and%20College!5e0!3m2!1sen!2sbd!4v1753988694050!5m2!1sen!2sbd" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </div>
  </section>

  <footer class="bg-blue-900 text-white py-6">
    <div class="container mx-auto px-4 sm:px-6 text-center">
      <p class="text-sm sm:text-base">Developed by NeuraSoft LTD | Technical Contact: Md Imtiaz Ahmed Nahid (<a href="mailto:neurasoftware@gmail.com" class="hover:underline">neurasoftware@gmail.com</a>)</p>
      <p class="text-sm sm:text-base">© 2025 Gpcpsc Science Club. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault(); // Prevent default anchor click behavior
        document.querySelector(this.getAttribute('href')).scrollIntoView({
          behavior: 'smooth' // Smooth scroll to the target section
        });
      });
    });

    // Splash modal logic: Displays a pop-up message on page load
    document.addEventListener('DOMContentLoaded', function() {
      const modal = document.getElementById('splash-modal');
      const modalTitle = document.getElementById('modal-title');
      const modalText = document.getElementById('modal-text');
      const closeModal = document.getElementById('close-modal');

      // Define the event date and time in Dhaka (GMT+6)
      // Corrected the date for Stargazing Night to June 20, 2025
      const eventDate = new Date('2025-06-20T19:00:00+06:00'); // Stargazing Night: June 20, 2025, 7:00 PM Dhaka time
      const now = new Date(); // Current time

      let showModal = false;
      let modalTitleContent = '';
      let modalTextContent = '';

      // Check if current time is within 24 hours before or after the 'Stargazing Night' event
      const twentyFourHoursMs = 24 * 60 * 60 * 1000;
      if (now.getTime() >= (eventDate.getTime() - twentyFourHoursMs) && now.getTime() <= (eventDate.getTime() + twentyFourHoursMs)) {
        showModal = true;
        modalTitleContent = 'Special Event Alert: Stargazing Night Tonight!';
        modalTextContent = 'Join us for an unforgettable Stargazing Night! Discover the cosmos with telescopes. Event starts at 7:00 PM at Gazipur College grounds. Don\'t miss out!';
      } else {
        // Fallback to random general messages if no event is imminent
        const showGameMessage = Math.random() < 0.5;
        if (showGameMessage) {
          modalTitleContent = 'Discover Science Through Play!';
          modalTextContent = 'Join the Gpcpsc Science Club to explore interactive games like our Projectile Motion and Orbit Simulator, connect with passionate scientists, and participate in exclusive workshops!';
        } else {
          modalTitleContent = 'Join the Gpcpsc Science Club!';
          modalTextContent = 'Be part of a dynamic community in Gazipur! Engage in hands-on experiments, attend inspiring events, and access exclusive resources to fuel your scientific journey.';
        }
        showModal = true; // Always show modal for general messages
      }

      if (showModal) {
        modalTitle.textContent = modalTitleContent;
        modalText.textContent = modalTextContent;
        modal.classList.add('show'); // Display the modal
      }

      // Close modal when close button is clicked
      closeModal.addEventListener('click', function() {
        modal.classList.remove('show');
      });

      // Close modal when clicking outside the modal content
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
          modal.classList.remove('show');
        }
      });

      // Attach event listeners for the new game controls
      document.getElementById('explain-element-btn').addEventListener('click', getPeriodicElementInfo);
      document.getElementById('next-quiz-btn').addEventListener('click', generateQuizQuestion);
      document.getElementById('add-planet-btn').addEventListener('click', addPlanet);
      document.getElementById('projectile-fact-btn').addEventListener('click', getProjectileFact);
      document.getElementById('orbit-fact-btn').addEventListener('click', getOrbitFact); // New event listener for Orbit Simulator

      // Update display for sliders on load
      document.getElementById('gravity').addEventListener('input', function() {
        document.getElementById('gravity-value').textContent = `${this.value} m/s²`;
      });
      document.getElementById('drag').addEventListener('input', function() {
        document.getElementById('drag-value').textContent = this.value;
      });
      document.getElementById('star-mass').addEventListener('input', function() {
        document.getElementById('star-mass-value').textContent = this.value;
      });

      // Initialize the first game canvas
      setup();
    });

    // Membership form validation
    document.getElementById('membership-form').addEventListener('submit', function(e) {
      e.preventDefault(); // Prevent default form submission
      let isValid = true; // Flag to track overall form validity

      // Validate Full Name
      const name = document.getElementById('name').value;
      const nameError = document.getElementById('name-error');
      if (!name.trim()) {
        nameError.style.display = 'block';
        isValid = false;
      } else {
        nameError.style.display = 'none';
      }

      // Validate Email Address
      const email = document.getElementById('email').value;
      const emailError = document.getElementById('email-error');
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // Basic email regex
      if (!emailRegex.test(email)) {
        emailError.style.display = 'block';
        isValid = false;
      } else {
        emailError.style.display = 'none';
      }

      // Validate Phone Number (optional, but if entered, must match pattern)
      const phone = document.getElementById('phone').value;
      const phoneError = document.getElementById('phone-error');
      const phoneRegex = /^[0-9]{10,15}$/; // 10-15 digits
      if (phone && !phoneRegex.test(phone)) { // Only validate if phone number is provided
        phoneError.style.display = 'block';
        isValid = false;
      } else {
        phoneError.style.display = 'none';
      }

      // Validate Student ID (new field)
      const studentId = document.getElementById('student-id').value;
      const studentIdError = document.getElementById('student-id-error');
      // Assuming Student ID can be alphanumeric, or adjust regex as needed
      const studentIdRegex = /^[a-zA-Z0-9]{5,20}$/; // Example: 5-20 alphanumeric characters
      if (studentId && !studentIdRegex.test(studentId)) {
        studentIdError.style.display = 'block';
        isValid = false;
      } else {
        studentIdError.style.display = 'none';
      }

      // Validate Date of Birth (must be at least 13 years old)
      const dobInput = document.getElementById('dob').value;
      const dobError = document.getElementById('dob-error');
      if (!dobInput) { // Check if DOB is empty
        dobError.textContent = 'Please enter your date of birth.';
        dobError.style.display = 'block';
        isValid = false;
      } else {
        const dob = new Date(dobInput);
        const today = new Date();
        let age = today.getFullYear() - dob.getFullYear();
        const monthDiff = today.getMonth() - dob.getMonth();
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
          age--; // Decrement age if birthday hasn't occurred yet this year
        }
        if (age < 13) {
          dobError.textContent = 'You must be at least 13 years old to join.';
          dobError.style.display = 'block';
          isValid = false;
        } else {
          dobError.style.display = 'none';
        }
      }

      // Validate Consent checkbox
      const consent = document.getElementById('consent').checked;
      const consentError = document.getElementById('consent-error');
      if (!consent) {
        consentError.style.display = 'block';
        isValid = false;
      } else {
        consentError.style.display = 'none';
      }

      // If all validations pass, submit the form
      if (isValid) {
        this.submit(); // Triggers the Netlify form submission
      }
    });

    // Game state variables
    let currentGame = 'projectile'; // Default game to display initially
    let projectile = null; // Object to store projectile properties
    let angle = 45; // Initial angle for projectile
    let velocity = 50; // Initial velocity for projectile
    let gravity = 9.81; // Default gravity for projectile motion
    let dragCoefficient = 0.01; // Default air resistance for projectile motion
    let targetX, targetY, targetRadius = 15; // Target for projectile game
    let score = 0; // Score for projectile game

    let quiz = { element: '', symbol: '', options: [], correct: '' }; // Quiz state
    let planets = []; // Array to hold multiple planets for orbit simulator
    const G = 10; // Gravitational constant (simplified) for orbit simulator
    let starMass = 1000; // Mass of the central star for orbit simulator

    // Array of elements for the Periodic Table Quiz
    const elements = [
      { name: 'Hydrogen', symbol: 'H' },
      { name: 'Oxygen', symbol: 'O' },
      { name: 'Carbon', symbol: 'C' },
      { name: 'Nitrogen', symbol: 'N' },
      { name: 'Iron', symbol: 'Fe' },
      { name: 'Sodium', symbol: 'Na' },
      { name: 'Chlorine', symbol: 'Cl' },
      { name: 'Gold', symbol: 'Au' },
      { name: 'Silver', symbol: 'Ag' },
      { name: 'Copper', symbol: 'Cu' },
      { name: 'Helium', symbol: 'He' },
      { name: 'Lithium', symbol: 'Li' },
      { name: 'Boron', symbol: 'B' },
      { name: 'Fluorine', symbol: 'F' },
      { name: 'Neon', symbol: 'Ne' },
      { name: 'Aluminum', symbol: 'Al' },
      { name: 'Silicon', symbol: 'Si' },
      { name: 'Phosphorus', symbol: 'P' },
      { name: 'Sulfur', symbol: 'S' },
      { name: 'Potassium', symbol: 'K' }
    ];

    /**
     * Switches the active game displayed in the "Play & Learn" section.
     * @param {string} game - The ID of the game to switch to ('projectile', 'periodic', or 'orbit').
     */
    function switchGame(game) {
      // Remove 'active' class from all game tabs
      document.querySelectorAll('.game-tab').forEach(tab => tab.classList.remove('active'));
      // Hide all game sections
      document.querySelectorAll('.game-section').forEach(section => section.classList.add('hidden'));

      // Add 'active' class to the clicked tab
      document.querySelector(`[onclick="switchGame('${game}')"]`).classList.add('active');
      // Show the corresponding game section
      document.getElementById(`${game}-game`).classList.remove('hidden');

      currentGame = game; // Update current game state

      // Re-initialize p5.js canvas for the new game
      removeCanvas(); // Remove existing canvas if any
      setup(); // Call setup to create new canvas and initialize game
    }

    /**
     * Removes the existing p5.js canvas element from the DOM.
     */
    function removeCanvas() {
        let existingCanvas = select('canvas'); // Selects the p5.js canvas element
        if (existingCanvas) {
            existingCanvas.remove(); // Removes the canvas
        }
    }

    // Event listeners for Projectile Motion Game controls
    document.getElementById('angle').addEventListener('input', function() {
      angle = parseFloat(this.value); // Get angle value and convert to number
      document.getElementById('angle-value').textContent = `${angle}°`; // Update display
    });

    document.getElementById('velocity').addEventListener('input', function() {
      velocity = parseFloat(this.value); // Get velocity value and convert to number
      document.getElementById('velocity-value').textContent = `${velocity} m/s`; // Update display
    });

    document.getElementById('launch').addEventListener('click', function() {
      // Initialize projectile at a starting point on the ground, slightly above
      // 'height * 0.875' is the ground level, '- 5' places it just above the ground
      projectile = {
        x: 50,
        y: height * 0.875 - 5,
        vx: velocity * cos(radians(angle)), // Calculate initial horizontal velocity
        vy: -velocity * sin(radians(angle)), // Calculate initial vertical velocity (negative for upward movement)
        trail: [] // Initialize empty trail array for visual path
      };
    });

    /**
     * Generates a new question for the Periodic Table Quiz.
     */
    function generateQuizQuestion() {
      // Hide and clear the explanation area when a new question is generated
      document.getElementById('element-explanation').classList.add('hidden');
      document.getElementById('explanation-loading-text').textContent = '';

      // Select a random element from the elements array
      quiz.element = elements[floor(random(elements.length))];
      quiz.correct = quiz.element.symbol; // Set the correct symbol for the current question

      // Create a list of options, starting with the correct one
      quiz.options = [quiz.correct];
      while (quiz.options.length < 4) { // Generate 3 more unique wrong options
        const randomElement = elements[floor(random(elements.length))];
        // Add option only if it's not already in the list
        if (!quiz.options.includes(randomElement.symbol)) {
          quiz.options.push(randomElement.symbol);
        }
      }
      quiz.options.sort(() => random() - 0.5); // Shuffle the options randomly

      // Update the quiz question display
      document.getElementById('quiz-question').textContent = `What is the symbol for ${quiz.element.name}?`;
      const optionsDiv = document.getElementById('quiz-options');
      optionsDiv.innerHTML = ''; // Clear any previously displayed options

      // Create and append buttons for each option
      quiz.options.forEach(option => {
        const button = document.createElement('button');
        button.textContent = option;
        button.className = 'bg-blue-500 text-white px-4 py-2 rounded-full hover:bg-blue-600 w-full';
        button.onclick = () => checkAnswer(option); // Attach click handler to check the answer
        optionsDiv.appendChild(button);
      });
      document.getElementById('quiz-feedback').textContent = ''; // Clear any previous feedback message
    }

    /**
     * Checks if the selected answer for the quiz is correct and provides feedback.
     * @param {string} selected - The symbol selected by the user.
     */
    function checkAnswer(selected) {
      const feedback = document.getElementById('quiz-feedback');
      if (selected === quiz.correct) {
        feedback.textContent = 'Correct! Great job!';
        feedback.style.color = '#22c55e'; // Green color for correct answer
        // No auto-advance, user clicks "Next Question"
      } else {
        feedback.textContent = `Incorrect. The symbol for ${quiz.element.name} is ${quiz.correct}.`;
        feedback.style.color = '#dc2626'; // Red color for incorrect answer
      }
    }

    /**
     * Calls the Gemini API to get an explanation or fact about the current periodic element.
     */
    async function getPeriodicElementInfo() {
      const elementExplanationDiv = document.getElementById('element-explanation');
      const explanationLoadingText = document.getElementById('explanation-loading-text');
      const explainButton = document.getElementById('explain-element-btn');

      elementExplanationDiv.classList.remove('hidden'); // Show the explanation area
      explanationLoadingText.textContent = 'Loading explanation...'; // Set loading text
      explainButton.disabled = true; // Disable button during loading

      const prompt = `Provide a concise and interesting fact or explanation about the element ${quiz.element.name} (${quiz.element.symbol}). Keep it to 2-3 sentences.`;

      try {
        let chatHistory = [];
        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
        const payload = { contents: chatHistory };
        // The apiKey is automatically provided by the Canvas environment at runtime
        const apiKey = "AIzaSyCQrRkxMemGJdzvA1YPxol7jT4vSiWDWxc"; // Keep this empty, Canvas provides it
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

        const response = await fetch(apiUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        const result = await response.json();
        if (result.candidates && result.candidates.length > 0 &&
            result.candidates[0].content && result.candidates[0].content.parts &&
            result.candidates[0].content.parts.length > 0) {
          const text = result.candidates[0].content.parts[0].text;
          explanationLoadingText.textContent = text; // Display the generated text
        } else {
          explanationLoadingText.textContent = 'Could not get explanation. Please try again.';
          console.error('Gemini API response structure unexpected:', result);
        }
      } catch (error) {
        explanationLoadingText.textContent = 'Error fetching explanation. Please try again.';
        console.error('Error calling Gemini API:', error);
      } finally {
        explainButton.disabled = false; // Re-enable button regardless of success or failure
      }
    }

    /**
     * Calls the Gemini API to get a science fact related to projectile motion.
     */
    async function getProjectileFact() {
      const factExplanationDiv = document.getElementById('projectile-fact-explanation');
      const factLoadingText = document.getElementById('projectile-fact-loading-text');
      const factButton = document.getElementById('projectile-fact-btn');

      factExplanationDiv.classList.remove('hidden'); // Show the explanation area
      factLoadingText.textContent = 'Loading science fact...'; // Set loading text
      factButton.disabled = true; // Disable button during loading

      const prompt = `Provide a concise and interesting scientific fact or principle related to projectile motion, air resistance, or gravity. Keep it to 2-3 sentences.`;

      try {
        let chatHistory = [];
        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
        const payload = { contents: chatHistory };
        const apiKey = "AIzaSyDBXVrObWTuXlmt_2JOqs61OQ5UemScXTo"; // Canvas will provide this API key at runtime
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

        const response = await fetch(apiUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        const result = await response.json();
        if (result.candidates && result.candidates.length > 0 &&
            result.candidates[0].content && result.candidates[0].content.parts &&
            result.candidates[0].content.parts.length > 0) {
          const text = result.candidates[0].content.parts[0].text;
          factLoadingText.textContent = text; // Display the generated text
        } else {
          factLoadingText.textContent = 'Could not get science fact. Please try again.';
          console.error('Gemini API response structure unexpected:', result);
        }
      } catch (error) {
        factLoadingText.textContent = 'Error fetching science fact. Please try again.';
        console.error('Error calling Gemini API:', error);
      } finally {
        factButton.disabled = false; // Re-enable button regardless of success or failure
      }
    }

    /**
     * Calls the Gemini API to get a science fact related to orbital mechanics.
     */
    async function getOrbitFact() {
      const factExplanationDiv = document.getElementById('orbit-fact-explanation');
      const factLoadingText = document.getElementById('orbit-fact-loading-text');
      const factButton = document.getElementById('orbit-fact-btn');

      factExplanationDiv.classList.remove('hidden'); // Show the explanation area
      factLoadingText.textContent = 'Loading orbital fact...'; // Set loading text
      factButton.disabled = true; // Disable button during loading

      const prompt = `Provide a concise and interesting scientific fact or principle related to orbital mechanics, gravity, or celestial bodies. Keep it to 2-3 sentences.`;

      try {
        let chatHistory = [];
        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
        const payload = { contents: chatHistory };
        const apiKey = "AIzaSyDBXVrObWTuXlmt_2JOqs61OQ5UemScXTo"; // Canvas will provide this API key at runtime
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

        const response = await fetch(apiUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        const result = await response.json();
        if (result.candidates && result.candidates.length > 0 &&
            result.candidates[0].content && result.candidates[0].content.parts &&
            result.candidates[0].content.parts.length > 0) {
          const text = result.candidates[0].content.parts[0].text;
          factLoadingText.textContent = text; // Display the generated text
        } else {
          factLoadingText.textContent = 'Could not get orbital fact. Please try again.';
          console.error('Gemini API response structure unexpected:', result);
        }
      } catch (error) {
        factLoadingText.textContent = 'Error fetching orbital fact. Please try again.';
        console.error('Error calling Gemini API:', error);
      } finally {
        factButton.disabled = false; // Re-enable button regardless of success or failure
      }
    }


    // Event listener for Orbit Simulator controls: Add New Planet
    function addPlanet() {
      // Calculate initial position within a reasonable range around the star
      let r_initial = random(70, 150); // Initial distance from star
      let theta_initial = random(TWO_PI); // Random angle

      let initialX = width / 2 + r_initial * cos(theta_initial);
      let initialY = height / 2 + r_initial * sin(theta_initial);

      // Calculate tangential velocity for a roughly circular orbit
      // v = sqrt(G * M / r)
      let v_tangential = sqrt((G * starMass) / r_initial);

      // Determine velocity components perpendicular to the radius vector
      let vx_initial = -v_tangential * sin(theta_initial);
      let vy_initial = v_tangential * cos(theta_initial);

      let newPlanet = {
        x: initialX,
        y: initialY,
        vx: vx_initial * random(0.8, 1.2), // Add some randomness to initial velocity
        vy: vy_initial * random(0.8, 1.2),
        mass: random(1, 10), // Random mass for the new planet
        trail: [] // Initialize empty trail array
      };
      planets.push(newPlanet);
    }

    // Event listener for Orbit Simulator controls: Reset Orbit
    document.getElementById('reset-orbit').addEventListener('click', function() {
      planets = []; // Clear all planets
      addPlanet(); // Add one initial planet
    });

    // p5.js Setup function: Called once when the sketch starts or when `setup()` is explicitly called
    function setup() {
      // Calculate responsive canvas dimensions
      let canvasWidth = Math.min(800, window.innerWidth * 0.9);
      let canvasHeight = Math.min(400, window.innerHeight * 0.6);
      let canvas = createCanvas(canvasWidth, canvasHeight); // Create the p5.js canvas

      // Attach the canvas to the correct parent div based on the current game
      if (currentGame === 'projectile') {
        canvas.parent('projectile-canvas');
        projectile = null; // Reset projectile state
        targetX = random(width * 0.7, width * 0.9); // Randomize target X
        targetY = height * 0.85; // Target always on the ground
        score = 0;
        document.getElementById('score-value').textContent = score;
        // Ensure sliders display initial values correctly
        document.getElementById('gravity').value = gravity;
        document.getElementById('drag').value = dragCoefficient;
        document.getElementById('gravity-value').textContent = `${gravity} m/s²`;
        document.getElementById('drag-value').textContent = dragCoefficient;
        // Hide projectile fact explanation on game switch
        document.getElementById('projectile-fact-explanation').classList.add('hidden');
        document.getElementById('projectile-fact-loading-text').textContent = '';
      } else if (currentGame === 'periodic') {
        canvas.parent('periodic-canvas');
        generateQuizQuestion(); // Generate the first quiz question
        // Hide element explanation on game switch
        document.getElementById('element-explanation').classList.add('hidden');
        document.getElementById('explanation-loading-text').textContent = '';
      } else if (currentGame === 'orbit') {
        canvas.parent('orbit-canvas');
        planets = []; // Clear planets on setup
        addPlanet(); // Add one initial planet
        // Ensure star mass slider displays initial value correctly
        document.getElementById('star-mass').value = starMass;
        document.getElementById('star-mass-value').textContent = starMass;
        // Hide orbit fact explanation on game switch
        document.getElementById('orbit-fact-explanation').classList.add('hidden');
        document.getElementById('orbit-fact-loading-text').textContent = '';
      }
    }

    // p5.js Draw function: Called repeatedly (default 60 times per second)
    function draw() {
      background(220); // Clear the canvas with a light gray background each frame

      if (currentGame === 'projectile') {
        // Projectile Motion Game rendering
        fill(100, 200, 100); // Green color for the ground
        noStroke(); // Remove stroke for the ground
        rect(0, height * 0.875, width, height * 0.125); // Draw the ground at the bottom 1/8th of the canvas

        fill(255, 165, 0); // Orange color for the target
        ellipse(targetX, targetY, targetRadius * 2, targetRadius * 2);

        // Update gravity and drag values from sliders
        gravity = parseFloat(document.getElementById('gravity').value);
        dragCoefficient = parseFloat(document.getElementById('drag').value);

        // Draw and update projectile if it exists
        if (projectile) {
          // Draw trail
          for (let i = 0; i < projectile.trail.length; i++) {
            let p = projectile.trail[i];
            let alpha = map(i, 0, projectile.trail.length, 0, 255);
            fill(255, 0, 0, alpha); // Red trail, fading out
            noStroke();
            ellipse(p.x, p.y, 5, 5); // Smaller ellipses for trail
          }
          fill(255, 0, 0); // Red color for the projectile
          noStroke();
          ellipse(projectile.x, projectile.y, 10, 10); // Draw the projectile as a circle

          // Apply gravity
          projectile.vy += gravity * 0.01; // Scale gravity effect for p5.js frame rate

          // Apply air resistance (simple model)
          let speed = sqrt(projectile.vx * projectile.vx + projectile.vy * projectile.vy);
          if (speed > 0.1) { // Avoid division by zero and tiny speeds
              let dragForceX = -dragCoefficient * projectile.vx * speed;
              let dragForceY = -dragCoefficient * projectile.vy * speed;
              projectile.vx += dragForceX * 0.01; // Scale drag effect
              projectile.vy += dragForceY * 0.01;
          }

          // Update projectile position
          projectile.x += projectile.vx * 0.1;
          projectile.y += projectile.vy * 0.1;

          // Add current position to trail
          projectile.trail.push({ x: projectile.x, y: projectile.y });
          // Limit trail length
          if (projectile.trail.length > 50) { // Keep last 50 points for trail
            projectile.trail.shift();
          }

          // Collision with ground
          if (projectile.y >= height * 0.875 - 5) { // Adjusted for projectile radius
            projectile.y = height * 0.875 - 5;
            projectile.vx = 0;
            projectile.vy = 0;
            // Check for target hit
            let distanceToTarget = dist(projectile.x, projectile.y, targetX, targetY);
            if (distanceToTarget < targetRadius + 5) { // Target radius + projectile radius
              score += 1;
              document.getElementById('score-value').textContent = score;
              // Move target to new random location after hit
              targetX = random(width * 0.7, width * 0.9);
              targetY = height * 0.85; // Always on the ground
            }
            projectile = null; // Stop projectile
          }
        }
      } else if (currentGame === 'periodic') {
        // Periodic Table Quiz Game rendering (visuals are minimal as interaction is via HTML)
        fill(200); // Light gray background for the quiz area
        noStroke();
        rect(width * 0.1, height * 0.1, width * 0.8, height * 0.8); // Draw a large rectangle for the quiz area

        textAlign(CENTER, CENTER); // Center align text
        textSize(20); // Set text size
        fill(0); // Black text color
        text('Periodic Table Quiz', width / 2, height * 0.2); // Display the quiz title
      } else if (currentGame === 'orbit') {
        // Orbit Simulator Game rendering
        fill(255, 255, 0); // Yellow color for the central star
        noStroke();
        ellipse(width / 2, height / 2, 50, 50); // Draw the star at the center of the canvas

        starMass = parseFloat(document.getElementById('star-mass').value); // Update star mass from slider

        // Update and draw each planet
        for (let i = 0; i < planets.length; i++) {
          let p = planets[i];

          // Draw trail
          for (let j = 0; j < p.trail.length; j++) {
            let trailPoint = p.trail[j];
            let alpha = map(j, 0, p.trail.length, 0, 255);
            fill(0, 0, 255, alpha); // Blue trail, fading out
            noStroke();
            ellipse(trailPoint.x, trailPoint.y, 3, 3); // Smaller ellipses for trail
          }

          fill(0, 0, 255); // Blue color for the orbiting planet
          noStroke();
          ellipse(p.x, p.y, 15, 15); // Draw the planet

          // Calculate gravitational force
          const dx = width / 2 - p.x;
          const dy = height / 2 - p.y;
          const r = sqrt(dx * dx + dy * dy);

          if (r > 5) { // Avoid division by zero when planet is too close to the star
            const force = (G * starMass * p.mass) / (r * r);
            const ax = (force * dx / r) / p.mass;
            const ay = (force * dy / r) / p.mass;

            p.vx += ax * 0.1; // Scale acceleration for smoother movement
            p.vy += ay * 0.1;
          }

          p.x += p.vx;
          p.y += p.vy;

          // Add current position to trail
          p.trail.push({ x: p.x, y: p.y });
          // Limit trail length
          if (p.trail.length > 100) { // Keep last 100 points for trail
            p.trail.shift();
          }
        }
      }
    }

    // p5.js windowResized function: Called automatically when the browser window is resized
    function windowResized() {
      // Recalculate responsive canvas dimensions
      let canvasWidth = Math.min(800, window.innerWidth * 0.9);
      let canvasHeight = Math.min(400, window.innerHeight * 0.6);
      resizeCanvas(canvasWidth, canvasHeight); // Resize the p5.js canvas

      // Re-initialize game states based on the current game
      if (currentGame === 'projectile') {
        projectile = null; // Reset projectile
        targetX = random(width * 0.7, width * 0.9);
        targetY = height * 0.85;
        score = 0;
        document.getElementById('score-value').textContent = score;
      } else if (currentGame === 'orbit') {
        planets = []; // Clear existing planets
        addPlanet(); // Add one new planet with new dimensions
      }
      // Periodic quiz doesn't need specific canvas re-initialization beyond what setup() does
    }
  </script>
</body>
</html>
